```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Gripper Tracking Pipeline                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              INPUT DATA
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                            â”‚
              Low-Res RGBD              High-Res RGB
           (task_folder)              (high_res_folder)
                    â”‚                            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Camera Synchronization â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Frame Selection      â”‚
                    â”‚   (first/middle/last)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘              PROCESS FRAMES                    â•‘
         â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         â•‘  For each frame:                               â•‘
         â•‘   1. Unproject depth â†’ Point Cloud             â•‘
         â•‘   2. Optional: Poisson meshing                 â•‘
         â•‘   3. Clean point cloud (radius filter)         â•‘
         â•‘   4. Robot FK + URDF rendering                 â•‘
         â•‘   5. Compute gripper bboxes:                   â•‘
         â•‘      â€¢ Contact bbox (orange)                   â•‘
         â•‘      â€¢ Body bbox (red)                         â•‘
         â•‘      â€¢ Fingertip bbox (blue)                   â•‘
         â•‘                                                 â•‘
         â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
         â•‘   â”‚ ğŸ†• BBOX ALIGNMENT (Default: ON)        â”‚   â•‘
         â•‘   â”‚  Align with point cloud COM:           â”‚   â•‘
         â•‘   â”‚   - Adjust x-y position                â”‚   â•‘
         â•‘   â”‚   - Adjust rotation (PCA)              â”‚   â•‘
         â•‘   â”‚   - Preserve z-coordinate              â”‚   â•‘
         â•‘   â”‚   Applied to all 3 bbox types          â”‚   â•‘
         â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
         â•‘                                                 â•‘
         â•‘   6. Compute TCP/object points (if enabled)    â•‘
         â•‘   7. Reproject to high-res (if applicable)     â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                          â”‚
              RGBD Outputs              Aligned Bboxes
            (V,T,H,W arrays)         (List of Dict per frame)
                    â”‚                          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘   ğŸ†• MVTRACKER INTEGRATION (Optional)          â•‘
         â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         â•‘  If --track-gripper-with-mvtracker:            â•‘
         â•‘                                                 â•‘
         â•‘  Invocation 1: Contact Bbox â†’ Orange Tracks    â•‘
         â•‘    â€¢ Generate 8 corner query points            â•‘
         â•‘    â€¢ Track across frames                       â•‘
         â•‘    â€¢ Output: [T, N, 3] tracks + visibility     â•‘
         â•‘                                                 â•‘
         â•‘  Invocation 2: Body Bbox â†’ Red Tracks          â•‘
         â•‘    â€¢ Generate 8 corner query points            â•‘
         â•‘    â€¢ Track across frames                       â•‘
         â•‘    â€¢ Output: [T, N, 3] tracks + visibility     â•‘
         â•‘                                                 â•‘
         â•‘  Invocation 3: Fingertip Bbox â†’ Blue Tracks    â•‘
         â•‘    â€¢ Generate 8 corner query points            â•‘
         â•‘    â€¢ Track across frames                       â•‘
         â•‘    â€¢ Output: [T, N, 3] tracks + visibility     â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                  â”‚
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘   ğŸ†• SAM OBJECT TRACKING (Optional)            â•‘
         â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         â•‘  If --track-objects-with-sam:                  â•‘
         â•‘                                                 â•‘
         â•‘  For each frame:                               â•‘
         â•‘   1. Project 3D gripper bbox â†’ 2D (cam 0)      â•‘
         â•‘   2. Expand bbox by contact threshold          â•‘
         â•‘   3. Segment with SAM                          â•‘
         â•‘   4. Store binary mask                         â•‘
         â•‘                                                 â•‘
         â•‘  Output: List of masks per frame               â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                          â”‚
              Save to NPZ               Visualize in Rerun
                    â”‚                          â”‚
                    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚                        â”‚
                    â”‚        Point Clouds            Bounding Boxes
                    â”‚      (RGB colored)          (Orange/Red/Blue)
                    â”‚              â”‚                        â”‚
                    â”‚              â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚                  â”‚
                    â”‚              â”‚        Original         ğŸ†• Aligned
                    â”‚              â”‚         Bboxes            Bboxes
                    â”‚              â”‚                               â”‚
                    â”‚              â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚                    â”‚                     â”‚
                    â”‚              â”‚              Contact (Orange)      Body (Red)
                    â”‚              â”‚                    â”‚            Fingertip (Blue)
                    â”‚              â”‚                    â”‚
                    â”‚              â”‚         ğŸ†• MVTracker Tracks
                    â”‚              â”‚              (Point trajectories)
                    â”‚              â”‚                    â”‚
                    â”‚              â”‚              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚            â”‚
                    â”‚              â”‚        Orange Tracks  Red Tracks
                    â”‚              â”‚              â”‚       Blue Tracks
                    â”‚              â”‚              â”‚
                    â”‚              â”‚         ğŸ†• SAM Masks
                    â”‚              â”‚        (Object segmentations)
                    â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   OUTPUT FILES          â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â€¢ .npz (RGBD + metadata)â”‚
                    â”‚ â€¢ .rrd (Rerun viz)      â”‚
                    â”‚ â€¢ .mp4 (bbox videos)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Legend:
  â•”â•â•â•â•—  Major pipeline stage
  â”Œâ”€â”€â”€â”  Processing step
  ğŸ†•    New feature implemented
  â”‚     Data flow
  â†’     Transformation
```

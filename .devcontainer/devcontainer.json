{
  "name": "MVTracker Dev",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "runArgs": ["--gpus", "all"],
  "mounts": [
    "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind",
    "source=${localEnv:HOME}/.Xauthority,target=/root/.Xauthority,type=bind",
    "source=/home/nfs/datasets/internal,target=/data,type=bind,consistency=cached,readonly=false"
  ],
  "containerEnv": {
    "DISPLAY": "${localEnv:DISPLAY}",
    "XAUTHORITY": "/root/.Xauthority"
  },
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
  "workspaceFolder": "/workspace",
  "forwardPorts": [7860],
  "postCreateCommand": "python -m pip install --upgrade pip && pip install -r requirements.txt || true",
  "postStartCommand": "cp ${localEnv:HOME}/.Xauthority /root/.Xauthority 2>/dev/null || true; chmod 644 /root/.Xauthority 2>/dev/null || true",
  "customizations": {
    "vscode": {
      "extensions": ["ms-python.python", "ms-toolsai.jupyter"]
    }
  }
}
